
import * as React from "react";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Area, AreaChart, Bar, BarChart, CartesianGrid, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis } from "recharts";

// Mock data for exploit trends
const monthlyData = [
  { month: "Jan 22", count: 2, fundsLost: 32 },
  { month: "Feb 22", count: 3, fundsLost: 320 },
  { month: "Mar 22", count: 2, fundsLost: 52 },
  { month: "Apr 22", count: 1, fundsLost: 5 },
  { month: "May 22", count: 0, fundsLost: 0 },
  { month: "Jun 22", count: 1, fundsLost: 12 },
  { month: "Jul 22", count: 3, fundsLost: 15 },
  { month: "Aug 22", count: 2, fundsLost: 8 },
  { month: "Sep 22", count: 0, fundsLost: 0 },
  { month: "Oct 22", count: 2, fundsLost: 114 },
  { month: "Nov 22", count: 1, fundsLost: 3 },
  { month: "Dec 22", count: 0, fundsLost: 0 },
  { month: "Jan 23", count: 1, fundsLost: 8 },
  { month: "Feb 23", count: 1, fundsLost: 4 },
  { month: "Mar 23", count: 2, fundsLost: 42 },
];

const exploitTypes = [
  { name: "Smart Contract", value: 42 },
  { name: "Protocol", value: 28 },
  { name: "Bridge", value: 15 },
  { name: "Flash Loan", value: 10 },
  { name: "Oracle", value: 5 },
];

export function ExploitTrends() {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <Card className="col-span-1">
        <CardHeader>
          <CardTitle>Exploit Frequency</CardTitle>
          <CardDescription>
            Number of security incidents by month
          </CardDescription>
        </CardHeader>
        <CardContent className="h-80">
          <ResponsiveContainer width="100%" height="100%">
            <BarChart
              data={monthlyData}
              margin={{ top: 10, right: 30, left: 0, bottom: 0 }}
            >
              <CartesianGrid strokeDasharray="3 3" vertical={false} />
              <XAxis dataKey="month" />
              <YAxis />
              <Tooltip 
                formatter={(value) => [`${value} incidents`, "Count"]}
                labelFormatter={(label) => `Month: ${label}`}
              />
              <Bar dataKey="count" fill="#8884d8" name="Incidents" />
            </BarChart>
          </ResponsiveContainer>
        </CardContent>
      </Card>

      <Card className="col-span-1">
        <CardHeader>
          <CardTitle>Funds Lost</CardTitle>
          <CardDescription>
            Total value lost in exploits by month (in millions USD)
          </CardDescription>
        </CardHeader>
        <CardContent className="h-80">
          <ResponsiveContainer width="100%" height="100%">
            <AreaChart
              data={monthlyData}
              margin={{ top: 10, right: 30, left: 0, bottom: 0 }}
            >
              <CartesianGrid strokeDasharray="3 3" vertical={false} />
              <XAxis dataKey="month" />
              <YAxis />
              <Tooltip 
                formatter={(value) => [`$${value}M`, "Funds Lost"]}
                labelFormatter={(label) => `Month: ${label}`}
              />
              <Area
                type="monotone"
                dataKey="fundsLost"
                stroke="#ff7300"
                fill="#ffa726"
                fillOpacity={0.3}
                name="Funds Lost (USD Millions)"
              />
            </AreaChart>
          </ResponsiveContainer>
        </CardContent>
      </Card>
    </div>
  );
}
